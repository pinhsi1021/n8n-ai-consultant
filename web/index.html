<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>n8n AI å°å…¥é¡§å•</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans+TC:wght@300;400;500;700&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --gold: #b8955a;
            --gold-light: #d4b078;
            --gold-muted: rgba(184, 149, 90, 0.15);
            --gold-border: rgba(184, 149, 90, 0.25);
            --charcoal: #2c2c2c;
            --charcoal-deep: #1e1e1e;
            --charcoal-soft: #3a3a3a;
            --surface: #f7f5f2;
            --surface-warm: #f0ede8;
            --surface-card: #ffffff;
            --text-primary: #2c2c2c;
            --text-secondary: #6b6b6b;
            --text-muted: #9a9a9a;
            --text-light: #b8b8b8;
            --border: #e8e4df;
            --border-light: #f0ede8;
            --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.04);
            --shadow-md: 0 4px 20px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 8px 40px rgba(0, 0, 0, 0.08);
            --radius: 6px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans TC', 'Inter', -apple-system, sans-serif;
            background: var(--surface);
            color: var(--text-primary);
            min-height: 100vh;
            -webkit-font-smoothing: antialiased;
        }

        /* â”€â”€ Subtle Background Texture â”€â”€ */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.02'/%3E%3C/svg%3E");
            pointer-events: none;
            z-index: 0;
        }

        /* â”€â”€ Layout â”€â”€ */
        .container {
            max-width: 780px;
            margin: 0 auto;
            padding: 60px 24px 80px;
            position: relative;
            z-index: 1;
        }

        /* â”€â”€ Header â”€â”€ */
        .header {
            text-align: center;
            margin-bottom: 56px;
        }

        .header-logo {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 56px;
            height: 56px;
            border: 1.5px solid var(--gold);
            border-radius: 50%;
            margin-bottom: 24px;
            color: var(--gold);
            font-size: 1.5rem;
        }

        .header h1 {
            font-size: 1.6rem;
            font-weight: 500;
            letter-spacing: 0.06em;
            color: var(--charcoal);
            margin-bottom: 8px;
        }

        .header .subtitle {
            font-size: 0.82rem;
            font-weight: 300;
            color: var(--text-muted);
            letter-spacing: 0.15em;
            text-transform: uppercase;
        }

        .header .tags {
            display: flex;
            justify-content: center;
            gap: 16px;
            margin-top: 20px;
        }

        .header .tag {
            font-size: 0.7rem;
            letter-spacing: 0.08em;
            color: var(--text-light);
            padding: 4px 0;
            border-bottom: 1px solid var(--border);
        }

        /* â”€â”€ Cards â”€â”€ */
        .card {
            background: var(--surface-card);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 36px 32px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-sm);
            transition: box-shadow 0.3s ease;
        }

        .card:hover {
            box-shadow: var(--shadow-md);
        }

        .card-title {
            font-size: 0.72rem;
            font-weight: 600;
            letter-spacing: 0.12em;
            text-transform: uppercase;
            color: var(--gold);
            margin-bottom: 28px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .card-title::after {
            content: '';
            flex: 1;
            height: 1px;
            background: var(--border-light);
        }

        /* â”€â”€ Form â”€â”€ */
        .form-group {
            margin-bottom: 32px;
        }

        .form-label {
            font-size: 0.78rem;
            font-weight: 500;
            color: var(--text-secondary);
            letter-spacing: 0.04em;
            margin-bottom: 12px;
            display: block;
        }

        input[type="text"],
        textarea {
            width: 100%;
            padding: 12px 0;
            background: transparent;
            border: none;
            border-bottom: 1.5px solid var(--border);
            color: var(--text-primary);
            font-size: 0.95rem;
            font-family: inherit;
            transition: border-color 0.3s ease;
            outline: none;
            letter-spacing: 0.01em;
        }

        input[type="text"]:focus,
        textarea:focus {
            border-bottom-color: var(--gold);
        }

        input[type="text"]::placeholder,
        textarea::placeholder {
            color: var(--text-light);
            font-weight: 300;
        }

        textarea {
            resize: vertical;
            min-height: 80px;
            line-height: 1.7;
        }

        /* â”€â”€ Example Chips â”€â”€ */
        .example-chips {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 14px;
        }

        .example-chips .label {
            font-size: 0.7rem;
            color: var(--text-light);
            width: 100%;
            letter-spacing: 0.03em;
        }

        .example-chip {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text-secondary);
            font-size: 0.78rem;
            padding: 5px 14px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.25s ease;
            font-weight: 400;
        }

        .example-chip:hover {
            border-color: var(--gold);
            color: var(--gold);
        }

        .example-chip.selected {
            background: var(--gold-muted);
            border-color: var(--gold);
            color: var(--gold);
        }

        /* â”€â”€ Department Chips â”€â”€ */
        .dept-chips {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 8px;
        }

        .dept-chip {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text-secondary);
            font-size: 0.78rem;
            padding: 6px 16px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.25s ease;
        }

        .dept-chip:hover,
        .dept-chip.active {
            border-color: var(--gold);
            color: var(--gold);
            background: var(--gold-muted);
        }

        .dept-desc {
            font-size: 0.78rem;
            color: var(--text-muted);
            margin-top: 10px;
            padding-left: 12px;
            border-left: 2px solid var(--gold-border);
            opacity: 0;
            transition: opacity 0.3s;
        }

        .dept-desc.visible {
            opacity: 1;
        }

        /* â”€â”€ Button â”€â”€ */
        .btn-analyze {
            width: 100%;
            padding: 15px;
            background: var(--charcoal);
            color: var(--surface);
            font-size: 0.88rem;
            font-weight: 500;
            font-family: inherit;
            letter-spacing: 0.08em;
            border: none;
            border-radius: var(--radius);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .btn-analyze:hover {
            background: var(--charcoal-deep);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12);
        }

        .btn-analyze:active {
            transform: scale(0.99);
        }

        .btn-analyze:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        .btn-analyze .spinner {
            display: none;
            width: 16px;
            height: 16px;
            border: 1.5px solid rgba(255, 255, 255, 0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            margin-right: 8px;
            vertical-align: middle;
        }

        .btn-analyze.loading .spinner {
            display: inline-block;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* â”€â”€ Results â”€â”€ */
        #results {
            display: none;
        }

        #results.visible {
            display: block;
            animation: fadeIn 0.6s ease;
        }

        /* â”€â”€ Result Header â”€â”€ */
        .result-header {
            display: flex;
            align-items: flex-start;
            gap: 24px;
            padding: 32px;
            background: var(--surface-card);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            margin-bottom: 20px;
            box-shadow: var(--shadow-sm);
        }

        .solution-badge {
            display: inline-block;
            font-size: 0.65rem;
            font-weight: 600;
            letter-spacing: 0.12em;
            text-transform: uppercase;
            color: var(--gold);
            border: 1px solid var(--gold-border);
            padding: 3px 12px;
            border-radius: 20px;
            margin-bottom: 10px;
        }

        .solution-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--charcoal);
            margin-bottom: 8px;
        }

        .solution-desc {
            font-size: 0.88rem;
            color: var(--text-secondary);
            line-height: 1.7;
            font-weight: 300;
        }

        .solution-meta {
            margin-top: 14px;
            font-size: 0.72rem;
            color: var(--text-light);
            letter-spacing: 0.03em;
        }

        .difficulty-block {
            text-align: center;
            min-width: 90px;
            flex-shrink: 0;
        }

        .difficulty-number {
            font-size: 2.4rem;
            font-weight: 300;
            color: var(--charcoal);
            line-height: 1;
        }

        .difficulty-stars {
            font-size: 0.9rem;
            letter-spacing: 2px;
            color: var(--gold);
            margin-top: 4px;
        }

        .difficulty-label-sm {
            font-size: 0.65rem;
            color: var(--text-light);
            letter-spacing: 0.1em;
            text-transform: uppercase;
            margin-top: 6px;
        }

        /* â”€â”€ Workflow Section â”€â”€ */
        .workflow-flow {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 6px;
            padding: 20px;
            background: var(--surface-warm);
            border: 1px solid var(--border-light);
            border-radius: var(--radius);
            margin-bottom: 20px;
        }

        .wf-node {
            background: var(--surface-card);
            border: 1px solid var(--border);
            padding: 7px 14px;
            border-radius: 4px;
            font-size: 0.78rem;
            color: var(--text-primary);
            white-space: nowrap;
            transition: all 0.2s;
        }

        .wf-node:hover {
            border-color: var(--gold);
            box-shadow: var(--shadow-sm);
        }

        .wf-arrow {
            color: var(--text-light);
            font-size: 0.85rem;
            font-weight: 300;
        }

        .wf-detail-item {
            display: flex;
            align-items: flex-start;
            gap: 14px;
            padding: 14px 0;
            border-bottom: 1px solid var(--border-light);
            font-size: 0.85rem;
        }

        .wf-detail-item:last-child {
            border-bottom: none;
        }

        .wf-detail-num {
            width: 26px;
            height: 26px;
            border-radius: 50%;
            border: 1px solid var(--gold-border);
            color: var(--gold);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 0.72rem;
            flex-shrink: 0;
            margin-top: 2px;
        }

        .wf-detail-name {
            font-weight: 500;
            color: var(--text-primary);
        }

        .wf-detail-type {
            font-size: 0.72rem;
            color: var(--text-light);
            margin-left: 6px;
            font-weight: 300;
        }

        .wf-detail-desc {
            font-size: 0.82rem;
            color: var(--text-secondary);
            margin-top: 3px;
            font-weight: 300;
            line-height: 1.6;
        }

        /* â”€â”€ Difficulty Reasons â”€â”€ */
        .difficulty-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 24px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border-light);
        }

        .diff-score-display {
            font-size: 2.2rem;
            font-weight: 300;
            color: var(--charcoal);
            line-height: 1;
        }

        .diff-stars-display {
            font-size: 1rem;
            letter-spacing: 2px;
            color: var(--gold);
            margin-top: 2px;
        }

        .diff-label-text {
            font-size: 0.78rem;
            color: var(--text-muted);
            font-weight: 400;
        }

        .reason-item {
            display: flex;
            align-items: flex-start;
            gap: 14px;
            padding: 14px 16px;
            margin-bottom: 6px;
            background: var(--surface-warm);
            border-radius: var(--radius);
            font-size: 0.85rem;
            line-height: 1.65;
            color: var(--text-secondary);
            font-weight: 300;
            transition: all 0.2s;
        }

        .reason-item:hover {
            background: var(--surface);
            transform: translateX(3px);
        }

        .reason-num {
            width: 22px;
            height: 22px;
            min-width: 22px;
            border-radius: 50%;
            border: 1px solid var(--gold-border);
            color: var(--gold);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 0.68rem;
            margin-top: 2px;
        }

        /* â”€â”€ Implementation Steps â”€â”€ */
        .steps-timeline {
            position: relative;
            padding-left: 36px;
        }

        .steps-timeline::before {
            content: '';
            position: absolute;
            left: 12px;
            top: 8px;
            bottom: 8px;
            width: 1px;
            background: var(--border);
        }

        .step-item {
            position: relative;
            padding: 18px 20px;
            margin-bottom: 10px;
            background: var(--surface-warm);
            border: 1px solid var(--border-light);
            border-radius: var(--radius);
            transition: all 0.25s;
        }

        .step-item:hover {
            border-color: var(--gold-border);
            transform: translateX(3px);
        }

        .step-item::before {
            content: attr(data-step);
            position: absolute;
            left: -36px;
            top: 20px;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--surface-card);
            border: 1.5px solid var(--gold);
            color: var(--gold);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 0.68rem;
            z-index: 1;
        }

        .step-title {
            font-weight: 500;
            font-size: 0.92rem;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .step-duration {
            display: inline-block;
            font-size: 0.68rem;
            font-weight: 500;
            padding: 2px 10px;
            border-radius: 10px;
            border: 1px solid var(--gold-border);
            color: var(--gold);
            margin-bottom: 8px;
            letter-spacing: 0.03em;
        }

        .step-desc {
            font-size: 0.82rem;
            color: var(--text-secondary);
            line-height: 1.65;
            font-weight: 300;
        }

        /* â”€â”€ Alternatives â”€â”€ */
        .alt-card {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 14px 18px;
            background: var(--surface-warm);
            border-radius: var(--radius);
            margin-bottom: 6px;
            font-size: 0.85rem;
            transition: all 0.2s;
        }

        .alt-card:hover {
            transform: translateX(3px);
        }

        .alt-name {
            font-weight: 500;
            color: var(--text-primary);
        }

        .alt-meta {
            display: flex;
            gap: 14px;
            color: var(--text-light);
            font-size: 0.72rem;
            letter-spacing: 0.03em;
        }

        /* â”€â”€ Divider â”€â”€ */
        .divider {
            height: 1px;
            background: var(--border-light);
            margin: 12px 0 20px;
        }

        /* â”€â”€ Tabs â”€â”€ */
        .tabs {
            display: flex;
            gap: 0;
            margin-bottom: 24px;
            border-bottom: 1px solid var(--border);
        }

        .tab-btn {
            padding: 12px 24px;
            font-size: 0.82rem;
            font-weight: 500;
            color: var(--text-muted);
            background: none;
            border: none;
            border-bottom: 2px solid transparent;
            cursor: pointer;
            transition: all 0.25s;
            letter-spacing: 0.03em;
            font-family: inherit;
        }

        .tab-btn:hover {
            color: var(--text-primary);
        }

        .tab-btn.active {
            color: var(--gold);
            border-bottom-color: var(--gold);
        }

        .tab-badge {
            display: inline-block;
            font-size: 0.65rem;
            font-weight: 600;
            padding: 1px 7px;
            border-radius: 10px;
            background: var(--gold-muted);
            color: var(--gold);
            margin-left: 6px;
            vertical-align: middle;
        }

        .tab-panel {
            display: none;
        }

        .tab-panel.active {
            display: block;
            animation: fadeIn 0.4s ease;
        }

        /* â”€â”€ Community Card â”€â”€ */
        .comm-card {
            padding: 24px;
            background: var(--surface-card);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            margin-bottom: 14px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: var(--shadow-sm);
        }

        .comm-card:hover {
            border-color: var(--gold-border);
            box-shadow: var(--shadow-md);
            transform: translateY(-2px);
        }

        .comm-card.expanded {
            border-color: var(--gold);
        }

        .comm-card-header {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            gap: 16px;
        }

        .comm-card-title {
            font-size: 1rem;
            font-weight: 500;
            color: var(--text-primary);
            margin-bottom: 6px;
        }

        .comm-card-desc {
            font-size: 0.82rem;
            color: var(--text-secondary);
            line-height: 1.6;
            font-weight: 300;
            margin-bottom: 10px;
        }

        .comm-card-meta {
            display: flex;
            gap: 14px;
            font-size: 0.7rem;
            color: var(--text-light);
            letter-spacing: 0.03em;
        }

        .comm-card-meta span {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .comm-difficulty {
            text-align: center;
            min-width: 70px;
            flex-shrink: 0;
        }

        .comm-difficulty-num {
            font-size: 1.8rem;
            font-weight: 300;
            color: var(--charcoal);
            line-height: 1;
        }

        .comm-difficulty-stars {
            font-size: 0.75rem;
            letter-spacing: 1.5px;
            color: var(--gold);
            margin-top: 3px;
        }

        .comm-expand-hint {
            font-size: 0.68rem;
            color: var(--text-light);
            margin-top: 4px;
        }

        /* â”€â”€ Community Detail (expanded) â”€â”€ */
        .comm-detail {
            display: none;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--border-light);
        }

        .comm-card.expanded .comm-detail {
            display: block;
            animation: fadeIn 0.4s ease;
        }

        .comm-card.expanded .comm-expand-hint {
            display: none;
        }

        .comm-link {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            font-size: 0.78rem;
            font-weight: 500;
            color: var(--gold);
            text-decoration: none;
            padding: 6px 16px;
            border: 1px solid var(--gold-border);
            border-radius: 20px;
            transition: all 0.2s;
            margin-top: 12px;
        }

        .comm-link:hover {
            background: var(--gold-muted);
            border-color: var(--gold);
        }

        .comm-link-btn {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            font-size: 0.72rem;
            font-weight: 600;
            color: #fff;
            background: linear-gradient(135deg, var(--gold), #c9963a);
            text-decoration: none;
            padding: 6px 14px;
            border-radius: 16px;
            transition: all 0.25s;
            margin-top: 8px;
            letter-spacing: 0.02em;
            box-shadow: 0 2px 6px rgba(169, 124, 50, 0.25);
            white-space: nowrap;
        }

        .comm-link-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(169, 124, 50, 0.4);
            filter: brightness(1.08);
        }

        .comm-loading {
            text-align: center;
            padding: 40px 0;
            color: var(--text-muted);
            font-size: 0.85rem;
        }

        .comm-loading .spinner-dot {
            display: inline-block;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: var(--gold);
            margin: 0 3px;
            animation: dotPulse 1.2s ease infinite;
        }

        .comm-loading .spinner-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .comm-loading .spinner-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes dotPulse {

            0%,
            100% {
                opacity: 0.3;
                transform: scale(0.8);
            }

            50% {
                opacity: 1;
                transform: scale(1.2);
            }
        }

        .no-community {
            text-align: center;
            padding: 32px;
            color: var(--text-muted);
            font-size: 0.85rem;
            line-height: 1.6;
        }

        /* â”€â”€ Pain Analysis â”€â”€ */
        .analysis-summary {
            font-size: 0.88rem;
            color: var(--text-secondary);
            line-height: 1.8;
            font-weight: 300;
            margin-bottom: 20px;
            padding: 16px;
            background: var(--surface-warm);
            border-radius: var(--radius);
            border-left: 3px solid var(--gold);
        }

        .detected-dims {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 12px;
        }

        .dim-group {
            margin-bottom: 16px;
        }

        .dim-label {
            font-size: 0.68rem;
            font-weight: 600;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            color: var(--text-muted);
            margin-bottom: 8px;
            display: block;
        }

        .dim-tag {
            display: inline-block;
            font-size: 0.75rem;
            padding: 4px 12px;
            border-radius: 20px;
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text-secondary);
            margin-right: 6px;
            margin-bottom: 4px;
        }

        .dim-tag.gold {
            border-color: var(--gold-border);
            color: var(--gold);
            background: var(--gold-muted);
        }

        .dim-tag.warn {
            border-color: #e8c07a;
            color: #b8855a;
            background: rgba(232, 192, 122, 0.1);
        }

        /* â”€â”€ Animations â”€â”€ */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(12px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* â”€â”€ Responsive â”€â”€ */
        @media (max-width: 600px) {
            .container {
                padding: 32px 16px 60px;
            }

            .header h1 {
                font-size: 1.3rem;
            }

            .card {
                padding: 24px 20px;
            }

            .result-header {
                flex-direction: column;
            }

            .difficulty-block {
                text-align: left;
            }
        }

        /* â”€â”€ Footer â”€â”€ */
        .footer {
            text-align: center;
            padding: 40px 0 20px;
            font-size: 0.7rem;
            color: var(--text-light);
            letter-spacing: 0.1em;
        }
    </style>
</head>

<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="header-logo">âœ¦</div>
            <h1>n8n AI å°å…¥é¡§å•</h1>
            <p class="subtitle">Universal AI Adoption Consultant</p>
            <div class="tags">
                <span class="tag">n8n ç¤¾ç¾¤ 7,888+ å·¥ä½œæµ</span>
                <span class="tag">å‹•æ…‹ AI åˆ†æ</span>
                <span class="tag">é›¶ API Key</span>
            </div>
        </div>

        <!-- Input Card -->
        <div class="card" id="inputCard">
            <div class="card-title">åˆ†æè¨­å®š</div>

            <div class="form-group">
                <label class="form-label">Step 1 â€” è¼¸å…¥æ‚¨çš„ç‡Ÿæ¥­é …ç›® / ç”¢æ¥­</label>
                <input type="text" id="industryInput" placeholder="ä¾‹å¦‚ï¼šé›»å•†ã€é¤é£²ã€åŠå°é«”ã€ä¿éšªã€ç‰©æ¥­ç®¡ç†...">
                <div class="example-chips">
                    <span class="label">å¸¸è¦‹ç¯„ä¾‹ï¼š</span>
                    <span class="example-chip" onclick="fillIndustry(this, 'é›¶å”®')">é›¶å”®</span>
                    <span class="example-chip" onclick="fillIndustry(this, 'è£½é€ ')">è£½é€ </span>
                    <span class="example-chip" onclick="fillIndustry(this, 'é‡‘è')">é‡‘è</span>
                    <span class="example-chip" onclick="fillIndustry(this, 'é†«ç™‚')">é†«ç™‚</span>
                    <span class="example-chip" onclick="fillIndustry(this, 'ç‰©æµ')">ç‰©æµ</span>
                    <span class="example-chip" onclick="fillIndustry(this, 'é›»å•†')">é›»å•†</span>
                    <span class="example-chip" onclick="fillIndustry(this, 'é¤é£²')">é¤é£²</span>
                    <span class="example-chip" onclick="fillIndustry(this, 'æ•™è‚²')">æ•™è‚²</span>
                    <span class="example-chip" onclick="fillIndustry(this, 'ç‡Ÿå»º')">ç‡Ÿå»º</span>
                    <span class="example-chip" onclick="fillIndustry(this, 'åŠå°é«”')">åŠå°é«”</span>
                    <span class="example-chip" onclick="fillIndustry(this, 'ä¿éšª')">ä¿éšª</span>
                    <span class="example-chip" onclick="fillIndustry(this, 'æ—…éŠ')">æ—…éŠ</span>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">Step 2 â€” é¸æ“‡éƒ¨é–€ï¼ˆå¯é¸ï¼‰</label>
                <div class="dept-chips" id="deptChips">
                    <span style="color: var(--text-light); font-size: 0.78rem;">â† è«‹å…ˆè¼¸å…¥ç‡Ÿæ¥­é …ç›®</span>
                </div>
                <div id="customDeptWrap" style="display:none; margin-top:8px;">
                    <input type="text" id="customDeptInput" placeholder="è¼¸å…¥è‡ªè¨‚éƒ¨é–€åç¨±..."
                        style="font-size:0.85rem; padding:8px 12px; border-radius:8px; border:1px solid #ddd; width:200px;">
                </div>
                <div class="dept-desc" id="deptDesc"></div>
            </div>

            <div class="form-group">
                <label class="form-label">Step 3 â€” æè¿°æ¥­å‹™ç—›é»ï¼ˆæ¯è¡Œä¸€å€‹ç—›é»ï¼Œå¯å¤šå€‹ï¼‰</label>
                <textarea id="painPoint" placeholder="æ¯è¡Œä¸€å€‹ç—›é»ï¼Œä¾‹å¦‚ï¼š
ç”¢ç·šæ’ç¨‹æ··äº‚ï¼Œäº¤æœŸå»¶èª¤
åˆ€å…·åº«ç®¡ç†æ²’æœ‰ç³»çµ±åŒ–
å“è³ªä¸è‰¯ç‡éé«˜ï¼Œéœ€è¦å³æ™‚ç›£æ§" style="min-height:120px;"></textarea>
                <div style="font-size:0.72rem; color:var(--text-light); margin-top:4px;">ğŸ’¡ æ¯è¡Œä¸€å€‹ç—›é» = ä¸€å€‹ç¨ç«‹å·¥ä½œæµåˆ†æ</div>
            </div>

            <button class="btn-analyze" id="analyzeBtn" onclick="analyze()">
                <span class="spinner"></span>
                <span class="btn-text">é–‹å§‹åˆ†æ</span>
            </button>
        </div>

        <!-- Consultant Mode Toggle -->
        <div id="consultantToggle" style="display:none; text-align:right; margin-bottom:12px;">
            <button id="consultantBtn" onclick="toggleConsultantMode()"
                style="background:linear-gradient(135deg,#2c2c2c,#444); color:#fff; border:none; padding:8px 18px; border-radius:20px; font-size:0.78rem; cursor:pointer; letter-spacing:0.03em; box-shadow:0 2px 8px rgba(0,0,0,0.2);">
                ğŸ”’ é¡§å•æ¨¡å¼
            </button>
        </div>

        <!-- Results: dynamically populated -->
        <div id="results"></div>

        <div class="footer">n8n AI ADOPTION CONSULTANT â€” MULTI PAIN-POINT ANALYSIS</div>
    </div>

    <script>
        let selectedDept = '';
        let debounceTimer = null;
        let currentData = null;
        let consultantMode = false;

        function fillIndustry(chipEl, name) {
            document.getElementById('industryInput').value = name;
            document.querySelectorAll('.example-chip').forEach(c => c.classList.remove('selected'));
            chipEl.classList.add('selected');
            loadDepartments();
        }

        function init() {
            const input = document.getElementById('industryInput');
            input.addEventListener('input', () => {
                clearTimeout(debounceTimer);
                document.querySelectorAll('.example-chip').forEach(c => c.classList.remove('selected'));
                debounceTimer = setTimeout(loadDepartments, 400);
            });
        }

        async function loadDepartments() {
            const industry = document.getElementById('industryInput').value.trim();
            const container = document.getElementById('deptChips');
            const descEl = document.getElementById('deptDesc');
            const customWrap = document.getElementById('customDeptWrap');
            selectedDept = '';
            descEl.classList.remove('visible');
            customWrap.style.display = 'none';

            if (!industry) {
                container.innerHTML = '<span style="color: var(--text-light); font-size: 0.78rem;">â† è«‹å…ˆè¼¸å…¥ç‡Ÿæ¥­é …ç›®</span>';
                return;
            }

            const res = await fetch(`/api/departments?industry=${encodeURIComponent(industry)}`);
            const data = await res.json();
            container.innerHTML = '';

            // å…¨éƒ¨é–€ chip
            const allChip = document.createElement('span');
            allChip.className = 'dept-chip active';
            allChip.textContent = 'å…¨éƒ¨é–€';
            allChip.onclick = () => {
                selectedDept = '';
                container.querySelectorAll('.dept-chip').forEach(c => c.classList.remove('active'));
                allChip.classList.add('active');
                descEl.classList.remove('visible');
                customWrap.style.display = 'none';
            };
            container.appendChild(allChip);

            // é è¨­éƒ¨é–€ chips
            if (data.departments && data.departments.length > 0) {
                data.departments.forEach(name => {
                    const chip = document.createElement('span');
                    chip.className = 'dept-chip';
                    chip.textContent = name;
                    chip.onclick = () => {
                        selectedDept = name;
                        container.querySelectorAll('.dept-chip').forEach(c => c.classList.remove('active'));
                        chip.classList.add('active');
                        customWrap.style.display = 'none';
                        const detail = data.details[name];
                        if (detail) {
                            descEl.textContent = `${detail.description}ã€€|ã€€ä¸»è¦ç¶­åº¦ï¼š${detail.primary_dimensions.join(', ')}`;
                            descEl.classList.add('visible');
                        }
                    };
                    container.appendChild(chip);
                });
            }

            // âœï¸ è‡ªè¨‚ chip
            const customChip = document.createElement('span');
            customChip.className = 'dept-chip';
            customChip.textContent = 'âœï¸ è‡ªè¨‚';
            customChip.style.borderStyle = 'dashed';
            customChip.onclick = () => {
                container.querySelectorAll('.dept-chip').forEach(c => c.classList.remove('active'));
                customChip.classList.add('active');
                customWrap.style.display = 'block';
                document.getElementById('customDeptInput').focus();
                descEl.classList.remove('visible');
            };
            container.appendChild(customChip);

            // ç›£è½è‡ªè¨‚è¼¸å…¥
            document.getElementById('customDeptInput').oninput = (e) => {
                selectedDept = e.target.value.trim();
            };
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        //  é¡§å•æ¨¡å¼åˆ‡æ›
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function toggleConsultantMode() {
            consultantMode = !consultantMode;
            const btn = document.getElementById('consultantBtn');
            btn.textContent = consultantMode ? 'ğŸ”“ é¡§å•æ¨¡å¼ ON' : 'ğŸ”’ é¡§å•æ¨¡å¼';
            btn.style.background = consultantMode
                ? 'linear-gradient(135deg, var(--gold), #c9963a)'
                : 'linear-gradient(135deg,#2c2c2c,#444)';
            // åˆ‡æ›æ‰€æœ‰ç¤¾ç¾¤å€å¡Šé¡¯ç¤º
            document.querySelectorAll('.pp-community-section').forEach(el => {
                el.style.display = consultantMode ? 'block' : 'none';
            });
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        //  Tab åˆ‡æ›ï¼ˆper pain-pointï¼‰
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function switchPPTab(ppIndex, tab) {
            const wrapper = document.getElementById(`pp-${ppIndex}`);
            if (!wrapper) return;
            wrapper.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            wrapper.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));
            const tabBtn = wrapper.querySelector(`.tab-btn[data-tab="${tab}"]`);
            const tabPanel = wrapper.querySelector(`#pp-${ppIndex}-panel-${tab}`);
            if (tabBtn) tabBtn.classList.add('active');
            if (tabPanel) tabPanel.classList.add('active');
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        //  ä¸»åˆ†æ
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        async function analyze() {
            const industry = document.getElementById('industryInput').value.trim();
            const painText = document.getElementById('painPoint').value.trim();
            if (!industry) { alert('è«‹è¼¸å…¥æ‚¨çš„ç‡Ÿæ¥­é …ç›®'); return; }
            if (painText.length < 4) { alert('ç—›é»æè¿°è‡³å°‘ 4 å€‹å­—'); return; }

            // æ‹†åˆ†å¤šç—›é»ï¼ˆæ›è¡Œæˆ– ; åˆ†éš”ï¼‰
            const painPoints = painText.split(/[\n;ï¼›]/).map(s => s.trim()).filter(s => s.length >= 2);
            if (painPoints.length === 0) { alert('è«‹è¼¸å…¥è‡³å°‘ä¸€å€‹ç—›é»'); return; }

            const btn = document.getElementById('analyzeBtn');
            btn.classList.add('loading');
            btn.disabled = true;
            btn.querySelector('.btn-text').textContent = `åˆ†æä¸­... (${painPoints.length} å€‹ç—›é»)`;

            try {
                const res = await fetch('/api/analyze', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ industry, department: selectedDept, pain_points: painPoints }),
                });
                const data = await res.json();
                currentData = data;
                renderAllResults(data);
            } catch (e) {
                alert('åˆ†æå¤±æ•—: ' + e.message);
            } finally {
                btn.classList.remove('loading');
                btn.disabled = false;
                btn.querySelector('.btn-text').textContent = 'é–‹å§‹åˆ†æ';
            }
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        //  æ¸²æŸ“å…¨éƒ¨çµæœï¼ˆå¤šç—›é»ï¼‰
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function renderAllResults(data) {
            const container = document.getElementById('results');
            const results = data.results || [];
            container.innerHTML = '';
            container.classList.add('visible');

            // é¡¯ç¤ºé¡§å•æ¨¡å¼æŒ‰éˆ•
            document.getElementById('consultantToggle').style.display = 'block';

            if (results.length === 0) {
                container.innerHTML = '<div class="card"><div class="card-title">ç„¡åˆ†æçµæœ</div></div>';
                return;
            }

            results.forEach((r, idx) => {
                const commCount = (r.community || []).length;
                const ppId = `pp-${idx}`;

                let html = `
                <div class="card" id="${ppId}" style="margin-bottom:20px;">
                    <div style="display:flex; align-items:center; gap:10px; margin-bottom:14px;">
                        <span style="background:linear-gradient(135deg, var(--gold), #c9963a); color:#fff; font-size:0.72rem; font-weight:700; padding:4px 10px; border-radius:12px;">ç—›é» ${idx + 1}</span>
                        <span style="font-size:1.05rem; font-weight:600; color:var(--text-primary);">${r.pain_point}</span>
                    </div>

                    <!-- Pain Analysis -->
                    ${renderPainAnalysis(r)}

                    <!-- Tabs -->
                    <div class="tabs" style="margin-top:16px;">
                        <button class="tab-btn active" data-tab="local" onclick="switchPPTab(${idx},'local')">ğŸ”§ æœ¬åœ° AI åˆ†æ</button>
                        <button class="tab-btn pp-community-tab" data-tab="community" onclick="switchPPTab(${idx},'community')" style="${consultantMode ? '' : 'display:none;'}">
                            ğŸŒ n8n ç¤¾ç¾¤åƒè€ƒ <span class="tab-badge">${commCount}</span>
                        </button>
                    </div>

                    <!-- Local Tab (default) -->
                    <div class="tab-panel active" id="${ppId}-panel-local">
                        ${renderLocalHTML(r.local || {})}
                    </div>

                    <!-- Community Tab (consultant only) -->
                    <div class="tab-panel pp-community-section" id="${ppId}-panel-community" style="${consultantMode ? '' : 'display:none;'}">
                        ${renderCommunityHTML(r.community || [], idx)}
                    </div>
                </div>
                `;
                container.innerHTML += html;
            });

            container.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        // â”€â”€ ç—›é»åˆ†æå¡ç‰‡ â”€â”€
        function renderPainAnalysis(r) {
            let html = '';
            if (r.pain_summary) {
                html += `<div class="analysis-summary">${r.pain_summary}</div>`;
            }
            const dims = [
                { label: 'æ ¸å¿ƒé—œéµå­—', items: r.detected_keywords || [], cls: 'gold' },
                { label: 'è³‡æ–™ä¾†æº', items: r.detected_sources || [], cls: '' },
                { label: 'è™•ç†å‹•ä½œ', items: r.detected_actions || [], cls: '' },
                { label: 'è¼¸å‡ºæ–¹å¼', items: r.detected_outputs || [], cls: '' },
                { label: 'è¤‡é›œåº¦å› ç´ ', items: r.detected_complexity || [], cls: 'warn' },
            ];
            dims.forEach(d => {
                if (d.items.length > 0) {
                    html += `<div class="dim-group"><span class="dim-label">${d.label}</span><div class="detected-dims">`;
                    d.items.forEach(item => { html += `<span class="dim-tag ${d.cls}">${item}</span>`; });
                    html += `</div></div>`;
                }
            });
            return html;
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        //  æœ¬åœ° AI åˆ†æ æ¸²æŸ“ï¼ˆè¿” HTML å­—ä¸²ï¼‰
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function renderLocalHTML(local) {
            const wf = local.workflow || {};
            const nodes = wf.nodes || [];

            let nodesHtml = nodes.map((n, i) => {
                const arrow = i < nodes.length - 1 ? '<span class="wf-arrow">â†’</span>' : '';
                return `<span class="wf-node">${n.name}</span>${arrow}`;
            }).join('');

            let detailHtml = nodes.map((n, i) => `
                <div class="wf-detail-item">
                    <div class="wf-detail-num">${i + 1}</div>
                    <div>
                        <div><span class="wf-detail-name">${n.name}</span><span class="wf-detail-type">${n.type}</span></div>
                        <div class="wf-detail-desc">${n.desc}</div>
                    </div>
                </div>
            `).join('');

            const reasonsHtml = (local.difficulty_reasons || []).map((r, i) => `
                <div class="reason-item"><div class="reason-num">${i + 1}</div><div>${r}</div></div>
            `).join('');

            const stepsHtml = (local.steps || []).map(s => `
                <div class="step-item" data-step="${s.step}">
                    <div class="step-title">${s.title}</div>
                    <div class="step-duration">${s.duration || ''}</div>
                    <div class="step-desc">${s.desc || ''}</div>
                </div>
            `).join('');

            return `
                <div class="result-header">
                    <div style="flex:1">
                        <div class="solution-badge">æœ¬åœ° AI å‹•æ…‹åˆ†æ</div>
                        <div class="solution-title">${local.solution_name || ''}</div>
                        <div class="solution-desc">${wf.description || ''}</div>
                    </div>
                    <div class="difficulty-block">
                        <div class="difficulty-number">${local.difficulty || 0}</div>
                        <div class="difficulty-stars">${local.difficulty_display || ''}</div>
                        <div class="difficulty-label-sm">DIFFICULTY</div>
                    </div>
                </div>
                <div style="font-weight:500; font-size:0.88rem; margin:16px 0 10px; color:var(--text-primary);">n8n å·¥ä½œæµè¨­è¨ˆ</div>
                <div class="workflow-flow">${nodesHtml}</div>
                <div class="divider"></div>
                ${detailHtml}
                <div class="divider" style="margin:20px 0;"></div>
                <div style="font-weight:500; font-size:0.88rem; margin-bottom:10px; color:var(--text-primary);">å›°é›£åº¦è©•ä¼°</div>
                <div class="difficulty-header">
                    <div>
                        <div class="diff-score-display">${local.difficulty || 0} / 5</div>
                        <div class="diff-stars-display">${local.difficulty_display || ''}</div>
                    </div>
                    <div style="flex:1;"><div class="diff-label-text">è©•åˆ†ç†ç”±</div></div>
                </div>
                ${reasonsHtml}
                <div class="divider" style="margin:20px 0;"></div>
                <div style="font-weight:500; font-size:0.88rem; margin-bottom:10px; color:var(--text-primary);">é ä¼°å°å…¥æˆæœ¬</div>
                <div style="background:var(--surface-warm); padding:16px; border-radius:var(--radius); border:1px solid var(--border-light); display:flex; align-items:center; gap:12px;">
                    <div style="font-size:1.4rem; font-weight:600; color:var(--charcoal);">${local.estimated_cost || 'N/A'}</div>
                    <div style="font-size:0.75rem; color:var(--text-secondary); background:#fff; padding:4px 8px; border-radius:12px; border:1px solid var(--border);">ä¾ç¯€é»æ•¸èˆ‡è¤‡é›œåº¦ä¼°ç®—</div>
                </div>

                <div class="divider" style="margin:20px 0;"></div>
                <div style="font-weight:500; font-size:0.88rem; margin-bottom:10px; color:var(--text-primary);">å¯¦æ–½æ­¥é©ŸæŒ‡å—</div>
                <div class="steps-timeline">${stepsHtml}</div>
            `;
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        //  ç¤¾ç¾¤æ–¹æ¡ˆ æ¸²æŸ“ï¼ˆè¿” HTML å­—ä¸²ï¼‰
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function renderCommunityHTML(items, ppIndex) {
            if (items.length === 0) {
                return `<div class="no-community">æœªæ‰¾åˆ°ç›¸é—œç¤¾ç¾¤å·¥ä½œæµæ¨¡æ¿</div>`;
            }
            return items.map((wf, i) => {
                const uid = `comm-${ppIndex}-${i}`;
                return `
                <div class="comm-card" id="${uid}" onclick="document.getElementById('${uid}').classList.toggle('expanded')">
                    <div class="comm-card-header">
                        <div style="flex:1;">
                            <div class="comm-card-title">${wf.name}</div>
                            <div class="comm-card-desc">${wf.description || ''}</div>
                            <div class="comm-card-meta">
                                <span>ğŸ“¦ ${wf.node_count || 0} ç¯€é»</span>
                                ${wf.views ? `<span>ğŸ‘ ${wf.views.toLocaleString()} æ¬¡ç€è¦½</span>` : ''}
                                ${wf.creator ? `<span>ğŸ‘¤ ${wf.creator}</span>` : ''}
                            </div>
                            ${wf.url ? `<a class="comm-link-btn" href="${wf.url}" target="_blank" onclick="event.stopPropagation();">ğŸ”— æŸ¥çœ‹ n8n æ¨¡æ¿ â†’</a>` : ''}
                        </div>
                        <div class="comm-difficulty">
                            <div class="comm-difficulty-num">${wf.difficulty}</div>
                            <div class="comm-difficulty-stars">${wf.difficulty_display}</div>
                            <div class="comm-expand-hint">é»æ“Šå±•é–‹ â†“</div>
                        </div>
                    </div>
                    <div class="comm-detail" id="${uid}-detail">
                        ${renderCommunityDetail(wf)}
                    </div>
                </div>`;
            }).join('');
        }

        function renderCommunityDetail(wf) {
            const nodes = wf.nodes || [];
            let nodesHtml = nodes.map((n, i) => {
                const arrow = i < nodes.length - 1 ? '<span class="wf-arrow">â†’</span>' : '';
                return `<span class="wf-node">${n.name}</span>${arrow}`;
            }).join('');

            let detailHtml = nodes.map((n, i) => `
                <div class="wf-detail-item">
                    <div class="wf-detail-num">${i + 1}</div>
                    <div>
                        <div><span class="wf-detail-name">${n.name}</span><span class="wf-detail-type">${n.type}</span></div>
                        <div class="wf-detail-desc">${n.desc}</div>
                    </div>
                </div>
            `).join('');

            const reasonsHtml = (wf.difficulty_reasons || []).map((r, i) => `
                <div class="reason-item"><div class="reason-num">${i + 1}</div><div>${r}</div></div>
            `).join('');

            const stepsHtml = (wf.steps || []).map(s => `
                <div class="step-item" data-step="${s.step}">
                    <div class="step-title">${s.title}</div>
                    ${s.duration ? `<div class="step-duration">${s.duration}</div>` : ''}
                    <div class="step-desc">${s.desc || ''}</div>
                </div>
            `).join('');

            return `
                <div style="font-weight:500; font-size:0.88rem; margin-bottom:12px; color:var(--text-primary);">å·¥ä½œæµç¯€é»</div>
                <div class="workflow-flow">${nodesHtml}</div>
                <div class="divider"></div>
                ${detailHtml}
                <div class="divider" style="margin:20px 0;"></div>
                <div style="font-weight:500; font-size:0.88rem; margin-bottom:12px; color:var(--text-primary);">å›°é›£åº¦è©•ä¼°</div>
                <div class="difficulty-header">
                    <div>
                        <div class="diff-score-display">${wf.difficulty} / 5</div>
                        <div class="diff-stars-display">${wf.difficulty_display}</div>
                    </div>
                    <div style="flex:1;"><div class="diff-label-text">è©•åˆ†ç†ç”±</div></div>
                </div>
                ${reasonsHtml}
                <div class="divider" style="margin:20px 0;"></div>
                <div style="font-weight:500; font-size:0.88rem; margin-bottom:12px; color:var(--text-primary);">å¯¦æ–½æ­¥é©Ÿ</div>
                <div class="steps-timeline">${stepsHtml}</div>
                ${wf.url ? `<a class="comm-link" href="${wf.url}" target="_blank" onclick="event.stopPropagation();">åœ¨ n8n ç¤¾ç¾¤æŸ¥çœ‹ â†’</a>` : ''}
            `;
        }

        init();
    </script>
</body>

</html>